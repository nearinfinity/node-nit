<script type="text/javascript">
  $(function () {
    $.get('/tasks.json', function (data) {
      var tasks = JSON.parse(data);
      $('#tasks tbody').html(
        $('#taskTemplate').render(tasks)
      );
    });
  });
</script>

<script id="taskTemplate" type="text/x-jsrender">
  <tr id='task-{{:id}}' class='taskRow {{:ui.class}} {{:ui.fontStyle}}'>
    <td>{{:id}}</td>
    <td>{{:fields.Status}}</td>
    <td>{{:fields.Title}}</td>
    <td>{{:fields['Assigned To']}}</td>
    <td class="edit-cell">
      <a href="javascript:" onclick='openTask("{{:id}}");'>
        <i class="icon-edit"></i>
      </a>
      <a data-taskId="{{:id}}" class="task-info" onclick='toggleStatus(this, "{{:id}}")' href="#">
        <i class="{{:ui.statusIconClass}}"></i>
      </a>
      <a data-taskId="{{:id}}" class="task-info" onclick='showPopover(this, "{{:fields.Status}}", "{{:id}}")' href="#">
        <i class="icon-question-sign"></i>
      </a>
    </td>
  </tr>
</script>

<div id="tasksContainer"> 
  <table id="tasks" class="table table-hover table-condensed tablesorter">
    <thead>
      <th>ID</th>
      <th>Status 
        <div class="sort-icons">
          <i class="icon-chevron-down"></i>
        </div>
      </th>
      <th>Title</th>
      <th>Assigned To 
        <div class="sort-icons">
          <i class="icon-chevron-down"></i>
        </div>
      </th>
      <th>Actions</th>
    </thead>
    <tbody>

    </tbody>
  </table>

  <div class="tasksActions">
    <a href="/tasks/new">
      <i class="icon-plus"></i>
    </a>
  </div>
</div>
